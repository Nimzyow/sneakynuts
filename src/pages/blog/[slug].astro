---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import "../../styles/globals.css";

export async function getStaticPaths() {
  const blogPosts = await getCollection('blog');
  return blogPosts.map((post: CollectionEntry<'blog'>) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

type Props = {
  post: CollectionEntry<'blog'>;
};

const { post } = Astro.props;
const { Content } = await post.render();
---

<div class="min-h-screen bg-[var(--color-primary)]">
  <!-- Navigation -->
  <nav class="fixed top-0 w-full z-50 bg-black/20 backdrop-blur-md border-b border-white/10">
    <div class="max-w-7xl mx-auto px-6 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <div class="w-10 h-10 bg-gradient-to-r from-[var(--color-accent)] to-[var(--color-highlight)] rounded-lg flex items-center justify-center">
            <span class="text-2xl">üéÆ</span>
          </div>
          <a href="/" class="text-2xl font-bold text-white hover:text-[var(--color-accent)] transition-colors">Sneaky Nuts</a>
        </div>
        <div class="hidden md:flex items-center space-x-8">
          <a href="/" class="text-white hover:text-[var(--color-accent)] transition-colors">Home</a>
          <a href="/#games" class="text-white hover:text-[var(--color-accent)] transition-colors">Games</a>
          <a href="/#about" class="text-white hover:text-[var(--color-accent)] transition-colors">About</a>
          <a href="/#careers" class="text-white hover:text-[var(--color-accent)] transition-colors">Careers</a>
          <a href="/#contact" class="text-white hover:text-[var(--color-accent)] transition-colors">Contact</a>
          <a href="/blog" class="text-[var(--color-accent)] font-bold">Blog</a>
        </div>
        <button class="bg-[var(--color-accent)] text-[var(--color-text-dark)] px-6 py-2 rounded-full font-bold hover:bg-[var(--color-highlight)] transition-all transform hover:scale-105">
          Join Us
        </button>
      </div>
    </div>
  </nav>

  <!-- Blog Post Content -->
  <article class="pt-32 pb-16">
    <div class="max-w-4xl mx-auto px-6">
      <!-- Back to Blog -->
      <div class="mb-8">
        <a href="/blog" class="inline-flex items-center text-[var(--color-accent)] hover:text-[var(--color-highlight)] transition-colors">
          ‚Üê Back to Blog
        </a>
      </div>

      <!-- Post Header -->
      <header class="mb-12">
        <div class="text-6xl mb-6">{post.data.emoji || 'üìù'}</div>
        <h1 class="text-5xl md:text-6xl font-black mb-6 text-white">
          {post.data.title}
        </h1>
        <p class="text-xl text-[var(--color-text-secondary)] mb-8">
          {post.data.description}
        </p>
        
        <div class="flex flex-wrap gap-4 mb-8">
          {post.data.tags?.map((tag: string) => (
            <span class="px-4 py-2 bg-[var(--color-accent)]/20 text-[var(--color-accent)] rounded-full">
              {tag}
            </span>
          ))}
        </div>

        <div class="flex items-center justify-between text-[var(--color-text-secondary)] border-b border-[var(--color-text-secondary)]/20 pb-8">
          <div class="flex items-center space-x-4">
            <span>By <strong class="text-white">{post.data.author}</strong></span>
            <span>‚Ä¢</span>
            <time datetime={post.data.pubDate.toISOString()}>
              {post.data.pubDate.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
              })}
            </time>
          </div>
        </div>
      </header>

      <!-- Post Content -->
      <div class="prose prose-lg prose-invert max-w-none">
        <Content />
      </div>

      <!-- Post Footer -->
      <footer class="mt-16 pt-8 border-t border-[var(--color-text-secondary)]/20">
        <div class="flex items-center justify-between">
          <a href="/blog" class="inline-flex items-center text-[var(--color-accent)] hover:text-[var(--color-highlight)] transition-colors">
            ‚Üê Back to Blog
          </a>
          <div class="flex space-x-4">
            <button class="px-4 py-2 bg-[var(--color-accent)]/20 text-[var(--color-accent)] rounded-lg hover:bg-[var(--color-accent)] hover:text-[var(--color-text-dark)] transition-all">
              Share
            </button>
            <button class="px-4 py-2 border border-[var(--color-accent)] text-[var(--color-accent)] rounded-lg hover:bg-[var(--color-accent)] hover:text-[var(--color-text-dark)] transition-all">
              Follow
            </button>
          </div>
        </div>
      </footer>
    </div>
  </article>
</div>

<style>
  .prose {
    color: var(--color-text-secondary);
  }
  
  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    color: white;
    font-weight: bold;
  }
  
  .prose h1 {
    font-size: 2.5rem;
    margin-top: 2rem;
    margin-bottom: 1rem;
  }
  
  .prose h2 {
    font-size: 2rem;
    margin-top: 2rem;
    margin-bottom: 1rem;
    color: var(--color-accent);
  }
  
  .prose h3 {
    font-size: 1.5rem;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }
  
  .prose p {
    margin-bottom: 1.5rem;
    line-height: 1.7;
  }
  
  .prose a {
    color: var(--color-accent);
    text-decoration: none;
  }
  
  .prose a:hover {
    color: var(--color-highlight);
    text-decoration: underline;
  }
  
  .prose ul,
  .prose ol {
    margin-bottom: 1.5rem;
    padding-left: 2rem;
  }
  
  .prose li {
    margin-bottom: 0.5rem;
  }
  
  .prose blockquote {
    border-left: 4px solid var(--color-accent);
    padding-left: 1.5rem;
    margin: 2rem 0;
    font-style: italic;
    background: var(--color-secondary);
    padding: 1.5rem;
    border-radius: 0.5rem;
  }
  
  .prose code {
    background: var(--color-secondary);
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-family: 'Courier New', monospace;
    color: var(--color-accent);
  }
  
  .prose pre {
    background: var(--color-secondary);
    padding: 1.5rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1.5rem 0;
  }
  
  .prose pre code {
    background: none;
    padding: 0;
    color: var(--color-text-secondary);
  }
  
  .prose img {
    border-radius: 0.5rem;
    margin: 2rem 0;
  }
  
  .prose table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5rem 0;
  }
  
  .prose th,
  .prose td {
    border: 1px solid var(--color-text-secondary);
    padding: 0.75rem;
    text-align: left;
  }
  
  .prose th {
    background: var(--color-secondary);
    font-weight: bold;
  }
</style>
